<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <link rel="icon" href="icons/favicon.ico" type="image/ico">
    <title>Carte interactive de Barcelone</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <meta name="offline" content="true">

    <!-- Feuilles de style -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@latest/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- GÃ©nÃ©rateur PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Capture de DOM pour la carte -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="responsive.css">
    <script defer src="script.js"></script>
</head>

<body>

    <div id="search-container">
        <div class="search-wrapper">
            <input type="text" id="search-input" placeholder="Rechercher un lieu..." autocomplete="off" />
            <span id="clear-search" title="Effacer">âœ–</span>
        </div>
        <ul id="search-suggestions"></ul>
    </div>
    <div id="drawer" class="collapsed">
        <div id="drawer-handle">
            <span class="drawer-icon">â‹®â‹®â‹®</span>
        </div>
        <div id="controls">
            <div id="drag-handle" title="DÃ©placer le panneau">â‹®â‹®â‹®</div>

            <label for="mode">Mode de dÃ©placement :</label>
            <select id="mode">
                <option value="foot">ğŸš¶â€â™‚ï¸ Ã€ pied</option>
                <option value="driving">ğŸš— En voiture</option>
            </select>

            <div class="step-wrapper" id="start-wrapper">
                <label for="start" class="step-label">Point de dÃ©part :</label>
                <select id="start" class="step-select"></select>
            </div>

            <div class="step-wrapper" id="end-wrapper">
                <label for="end" class="step-label">Destination :</label>
                <select id="end" class="step-select"></select>
            </div>


            <div id="steps-holder"></div>
            <button onclick="replaceEndWithStep()">Ajouter une destination</button>

            <button onclick="calculateRoute()">Calculer lâ€™itinÃ©raire</button>
            <button onclick="enregistrerMonPlan()">Enregistrer mon trajet</button>
            <button onclick="resetRoute()">RÃ©initialiser</button>

            <label for="basemap">Fond de carte :</label>
            <select id="basemap" onchange="changeBaseMap(this.value)">
                <option value="light">Carte claire</option>
                <option value="satellite">Satellite</option>
            </select>

            <hr>
            <label><strong>Filtres :</strong></label>
            <div class="filter-group">
                <div style="margin-bottom: 8px;">
                    <button id="toggle-filters" style="padding: 6px 12px; font-size: 14px; cursor: pointer;">
                        Tout dÃ©sÃ©lectionner
                    </button>
                </div>
                <label class="filter-option">
                    <input type="checkbox" class="filter" value="hotel" checked>
                    <span class="filter-color hotel">ğŸŸ¦</span> HÃ´tel
                </label>
                <label class="filter-option">
                    <input type="checkbox" class="filter" value="parc" checked>
                    <span class="filter-color parc">ğŸŸ©</span> Parcs
                </label>
                <label class="filter-option">
                    <input type="checkbox" class="filter" value="restaurant" checked>
                    <span class="filter-color restaurant">ğŸŸ¥</span> Restaurants
                </label>
                <label class="filter-option">
                    <input type="checkbox" class="filter" value="monument" checked>
                    <span class="filter-color monument">ğŸŸª</span> Monuments
                </label>
                <label class="filter-option">
                    <input type="checkbox" class="filter" value="bar" checked>
                    <span class="filter-color bar">ğŸŸ§</span> Bars
                </label>
                <label class="filter-option">
                    <input type="checkbox" class="filter" value="plage" checked>
                    <span class="filter-color plage">ğŸŸ¨</span> Plages
                </label>
                <label class="filter-option">
                    <input type="checkbox" class="filter" value="Maureen" checked>
                    <span class="filter-color Maureen">â¬›</span> Maureen
                </label>
                <label class="filter-option">
                    <input type="checkbox" class="filter" value="metro">
                    <span class="filter-icon metro">
                        <img src="barcelonepng.png" alt="MÃ©tro"
                            style="width: 16px; height: 16px; vertical-align: middle;">
                    </span> MÃ©tros
                </label>
            </div>
            <hr>
            <label><strong>â­ Mes favoris :</strong></label>
            <ul id="favorites-list" style="list-style-type: none; padding-left: 0; font-size: 14px; margin-top: 8px;">
            </ul>
        </div>
    </div>

    <!-- <div id="mobile-routing-wrapper" class="collapsed">
        <div class="mobile-routing-handle">â‹®â‹®â‹®</div>
        <div id="mobile-routing-content"></div>
    </div> -->

    <a href="mÃ©tro/metro-lignes.html" id="metro-icon" class="mobile-only">
        <img src="barcelonepng.png" alt="MÃ©tro" />
    </a>


    <div id="map"></div>

    <!-- Bouton flÃ¨che pour ouvrir -->
    <div id="mobileToggle"><i class="fas fa-chevron-left"></i></div>

    <!-- Menu mobile cachÃ© -->
    <div id="mobileMenu">
        <a href="itinÃ©raire.html" class="menu-link">ItinÃ©raire de dimanche</a>
        <a href="programme.html" class="menu-link">Programme</a>
        <a href="mÃ©tro/metro-lignes.html" class="menu-link">
            ğŸ—º Lignes de mÃ©tro
        </a>
        <button onclick="loadOfflinePlan() " class="menu-link">Charger mon itinÃ©raire</button>
        <button id="locateBtn" class="map-button menu-link">ğŸ“ Me localiser</button>
        <div id="networkStatus" class="online">ğŸŸ¢ En ligne</div>
    </div>


    <button id="recenter-btn" title="Revenir Ã  la vue de dÃ©part">
        <i class="fas fa-crosshairs"></i>
    </button>

    <div id="compassWrapper">
        <img src="icons/arrow-compass.png" id="compassArrow" alt="Boussole">
    </div>

    <!-- librairies Leaflet -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.min.js"></script>

    <!-- ğŸ§­ OpenRouteService router -->
    <script src="https://unpkg.com/lrm-openrouteservice@1.0.0/dist/lrm-openrouteservice.min.js"></script>
    <script
        src="https://unpkg.com/@gegeweb/leaflet-routing-machine-openroute@latest/dist/leaflet-routing-openroute.min.js"></script>

</body>

</html>